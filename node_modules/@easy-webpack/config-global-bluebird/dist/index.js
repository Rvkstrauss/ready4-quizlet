"use strict";
var core_1 = require('@easy-webpack/core');
var webpack = require('webpack');
module.exports = function bluebird(_a) {
    var _b = (_a === void 0 ? {} : _a).expose, expose = _b === void 0 ? true : _b;
    return function bluebird() {
        var config = {
            plugins: [
                new webpack.ProvidePlugin({
                    'Promise': 'bluebird',
                })
            ].concat(core_1.get(this, 'plugins', []))
        };
        if (expose) {
            config.module = {
                rules: core_1.get(this, 'module.rules', []).concat([
                    { test: /[\/\\]node_modules[\/\\]bluebird[\/\\].+\.js$/, loader: 'expose-loader?Promise' }
                ])
            };
        }
        return config;
    };
};
//# sourceMappingURL=index.js.map